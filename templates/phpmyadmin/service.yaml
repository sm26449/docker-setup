name: phpmyadmin
description: "MySQL/MariaDB web administration"

dependencies:
  - name: mariadb
    variables:
      PMA_HOST: "${HOST}"
      PMA_PORT: "${PORT}"

variables:
  PHPMYADMIN_PORT:
    default: "8084"
    description: "Web port"
    prompt: true
  PMA_HOST:
    default: "mariadb"
    description: "Database host"
  MARIADB_SERVICE:
    default: "mariadb"
    description: "MariaDB service name (for depends_on)"

compose: |
  ${SERVICE_NAME}:
    image: phpmyadmin:latest
    container_name: ${SERVICE_NAME}
    restart: unless-stopped
    ports:
      - "${PHPMYADMIN_PORT:-8084}:80"
    environment:
      - PMA_HOST=${PMA_HOST:-mariadb}
    depends_on:
      - ${MARIADB_SERVICE}
