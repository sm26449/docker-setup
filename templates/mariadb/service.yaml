name: mariadb
description: "MySQL-compatible database"

variables:
  MARIADB_PORT:
    default: "3306"
    description: "MariaDB port"
    prompt: true
  MYSQL_ROOT_PASSWORD:
    default: ""
    description: "Root password"
    generate: password
    prompt: true
  MYSQL_DATABASE:
    default: "homeassistant"
    description: "Default database name"
    prompt: true
  MYSQL_USER:
    default: "homeassistant"
    description: "Database user"
    prompt: true
  MYSQL_PASSWORD:
    default: ""
    description: "User password"
    generate: password
    prompt: true

compose: |
  ${SERVICE_NAME}:
    image: mariadb:latest
    container_name: ${SERVICE_NAME}
    restart: unless-stopped
    ports:
      - "${MARIADB_PORT:-3306}:3306"
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
      - MYSQL_DATABASE=${MYSQL_DATABASE:-homeassistant}
      - MYSQL_USER=${MYSQL_USER:-homeassistant}
      - MYSQL_PASSWORD=${MYSQL_PASSWORD}
      - PUID=${PUID}
      - PGID=${PGID}
      - TZ=${TZ}
    volumes:
      - ${DOCKER_ROOT}/${SERVICE_NAME}/data:/var/lib/mysql
