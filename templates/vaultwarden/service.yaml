name: vaultwarden
description: "Bitwarden-compatible password manager"

variables:
  VAULTWARDEN_PORT:
    default: "8082"
    description: "Web port"
    prompt: true
  ADMIN_TOKEN:
    default: ""
    description: "Admin panel token"
    generate: random
    prompt: true
  SIGNUPS_ALLOWED:
    default: "true"
    description: "Allow new signups"
    prompt: true

compose: |
  ${SERVICE_NAME}:
    image: vaultwarden/server:latest
    container_name: ${SERVICE_NAME}
    restart: unless-stopped
    ports:
      - "${VAULTWARDEN_PORT:-8082}:80"
    environment:
      - ADMIN_TOKEN=${ADMIN_TOKEN}
      - SIGNUPS_ALLOWED=${SIGNUPS_ALLOWED:-true}
    volumes:
      - ${DOCKER_ROOT}/${SERVICE_NAME}/data:/data
